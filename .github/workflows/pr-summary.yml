name: PR Summary

# Trigger this workflow after PR validation workflows complete
on:
  workflow_run:
    workflows:
      - "PR Lint and Type Check"
      - "PR Security Scan"
      - "PR Build Validation"
    types:
      - completed

jobs:
  pr-summary:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout PR
        uses: actions/checkout@v4

      - name: Post PR Summary
        uses: marocchino/sticky-pull-request-comment@v2
        with:
          message: |
            ## üìù PR Validation Summary
            **Workflow:** ${{ github.event.workflow_run.name }}
            **Conclusion:** ${{ github.event.workflow_run.conclusion }}

            ### Details
            - Lint & Type Check: ${{ github.event.workflow_run.name == 'PR Lint and Type Check' && github.event.workflow_run.conclusion }}
            - Security Scan: ${{ github.event.workflow_run.name == 'PR Security Scan' && github.event.workflow_run.conclusion }}
            - Build Validation: ${{ github.event.workflow_run.name == 'PR Build Validation' && github.event.workflow_run.conclusion }}
